setwd("~/GitHub/RepRes_a2")
load("~/GitHub/RepRes_a2/myRR2.RData")
str(SD)
rel_cols = c("EVTYPE", "BGN_DATE", "STATE", "FATALITIES", "INJURIES", "PROPDMG", "PROPDMGEXP",
"CROPDMG", "CROPDMGEXP")
SD_clean <- SD[, which(names(SD) %in% rel_cols)]
str(SD_clean)
dim(SD_clean)
SD_clean$PROPDMGEXP <-as.factor(SD_clean$PROPDMGEXP)
SD_clean$CROPDMGEXP <-as.factor(SD_clean$CROPDMGEXP)
levels(SD_clean$PROPDMGEXP)
levels(SD_clean$CROPDMGEXP)
conversion_factor = list(`0` = c("", "-", "?", "+", "0"),
`1` = "1",
`2` = c("2", "h", "H"),
`3` = c("3", "K", "k"),
`4` = "4",
`5` = "5",
`6` = c("6", "M", "m"),
`7` = "7",
`8` = "8",
`9` = c("9","B", "b"))
levels(SD_clean$PROPDMGEXP) <- conversion_factor
levels(SD_clean$CROPDMGEXP) <- conversion_factor
table(SD_clean$PROPDMGEXP)
table(SD_clean$CROPDMGEXP)
SD_clean$PROPDMG = SD_clean$PROPDMG * (10^(as.integer(as.character(SD_clean$PROPDMGEXP))))
SD_clean$CROPDMG = SD_clean$CROPDMG * (10^(as.integer(as.character(SD_clean$CROPDMGEXP))))
summary (SD$PROPDMG )
summary (SD_clean$PROPDMG )
summary (SD$CROPDMG )
summary (SD_clean$CROPDMG )
head(SD_clean)
help(strftime)
strptime(SD_clean$BGN_DATE[1], "%m/%d/%y %H:%M:%S")
as.Date(SD_clean$BGN_DATE[1], "%m/%d/%Y ")
SD_clean$BGN_DATE <- as.Date(SD_clean$BGN_DATE, "%m/%d/%Y ")
str(SD_clean)
format (SD_clean$BGN_DATE[1], "%y")
format (SD_clean$BGN_DATE[1], "%Y")
SD_clean$BGN_DATE <- format (SD_clean$BGN_DATE[1], "%Y")
str(SD_clean)
head(SD_clean[c(1:6,8)])
write.table(SD_clean[c(1:4,6)],"data/SD_clean.txt", sep=";")
head(sort(table(SD_clean$EVTYPE), decreasing=TRUE), n=20)
events<-c("WINDS?", "FLOODS?", "WATERS?", "RAINS?", "WINT", "SNOW", "CLOUDS?",
"TEMP" , "HAILS?", "LIGHTNINGS?", "FIRES?", "FLD", "TORNADOS?")
nevents<-sapply (events, function(x) length(SD_clean$EVTYPE[grep(x,SD_clean$EVTYPE)]) )
nevents
nomi <- names(nevents)
sum(nevents)
neventsdf <- as.data.frame(nevents)
neventsdf <- cbind(neventsdf, nomi)
names(nevents)
head(neventsdf)
library (ggplot2)
ggplot( neventsdf, aes(x= nomi, y=nevents) ) +
geom_bar(stat="identity") + coord_flip()
setwd("~/GitHub/RepRes_a2")
load("~/GitHub/RepRes_a2/myRR2.RData")
rel_cols = c("EVTYPE", "BGN_DATE", "STATE", "FATALITIES", "INJURIES", "PROPDMG", "PROPDMGEXP",
"CROPDMG", "CROPDMGEXP")
SD_clean <- SD[, which(names(SD) %in% rel_cols)]
str(SD_clean)
dim(SD_clean)
SD_clean$BGN_DATE <- as.Date(SD_clean$BGN_DATE, "%m/%d/%Y ")
SD_clean$BGN_DATE <- format (SD_clean$BGN_DATE[1], "%Y")
str(SD_clean)
SD_clean$PROPDMGEXP <-as.factor(SD_clean$PROPDMGEXP)
SD_clean$CROPDMGEXP <-as.factor(SD_clean$CROPDMGEXP)
levels(SD_clean$PROPDMGEXP)
levels(SD_clean$CROPDMGEXP)
conversion_factor = list(`0` = c("", "-", "?", "+", "0"),
`1` = "1",
`2` = c("2", "h", "H"),
`3` = c("3", "K", "k"),
`4` = "4",
`5` = "5",
`6` = c("6", "M", "m"),
`7` = "7",
`8` = "8",
`9` = c("9","B", "b"))
levels(SD_clean$PROPDMGEXP) <- conversion_factor
levels(SD_clean$CROPDMGEXP) <- conversion_factor
table(SD_clean$PROPDMGEXP)
table(SD_clean$CROPDMGEXP)
SD_clean$PROPDMG = SD_clean$PROPDMG * (10^(as.integer(as.character(SD_clean$PROPDMGEXP))))
SD_clean$CROPDMG = SD_clean$CROPDMG * (10^(as.integer(as.character(SD_clean$CROPDMGEXP))))
summary (SD$PROPDMG )
summary (SD_clean$PROPDMG )
summary (SD$CROPDMG )
summary (SD_clean$CROPDMG )
head(SD_clean)
head(sort(table(SD_clean$EVTYPE), decreasing=TRUE), n=20)
headevents<-head(sort(table(SD_clean$EVTYPE), decreasing=TRUE), n=20)
headevents
sum(headevents)
dimclean<-dim(SD_clean)[1]
dimclean
(dimclean-sumh)/dimclean
sumh<sum(headevents)
sumh<sum(headevents)
sumh<-sum(headevents)
(dimclean-sumh)/dimclean
names(headevents)
barplot(headevents)
wind<- c(2,3,7,8,18)
names(headevents)[wind]
wind<- c(2,3,7,8,18)
flood<-c(5,6,17,19)
winter(c(12,13)
marinestorm<-c(15,16)
wind<- c(2,3,7,8,18)
flood<-c(5,6,17,19)
winter<-(c(12,13)
marinestorm <-c(15,16)
winter<-c(12,13)
marinestorm <-c(15,16)
names(headevents)[wind]
mywind<-names(headevents)[wind]
mywind
length(SD_clean[SD_clean$EVTYPE %in% names(headevents)[marinestorm],]$EVTYPE)
length(SD_clean[SD_clean$EVTYPE %in% names(headevents)[headevents],]$EVTYPE)
length(SD_clean[SD_clean$EVTYPE %in% names(headevents),]$EVTYPE)
kevents<-names(headevents)
kevents[wind]
kevents[wind]<-"STRONG WIND"
kevents
kevents[wind]<-"strong wind"
kevents[flood]<-"flood"
kevents[winter]<-"winter"
kevents[marinestorm]<-"marinestorm"
unique(kevents)
kevents[winter]<-"winter weather"
unique(kevents)
